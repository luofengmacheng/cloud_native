## ANTLR4规则解析生成器(二)：语法规则

### 1 编译原理回顾

#### 1.1 编译的过程

* 词法分析：解析源代码中的每个单词，输入是源代码，输出是词法单元，也就是解析出来的单词
* 语法分析：分析多个单词组成的短语，输入是词法单元，输出是抽象语法树
* 语义分析：对抽象语法树进行类型检查和符号表填充
* 生成中间代码：生成接近机器语言的中间代码
* 代码优化：对中间代码进行优化，包括消除冗余等
* 生成目标程序：生成机器语言的代码，对于C语言也就是.o文件

#### 1.2 文法

文法的概念：自然语言或者编程语言都是由各种词语和句法构成，文法可以用来描述它们的结构，。形式文法通常由一组生成式组成，这些生成式定义了如何从一个起始符号通过一系列替换步骤生成语言中的所有合法字符串。

文法的类型：

* 0型文法：无限制文法，左侧至少包含1个非终结符
* 1型文法：上下文有关文法，进行生成式替换时，需要考虑左侧非终结符的上下文，左侧的符号个数不能多于右侧的符号个数
* 2型文法：上下文无关文法，进行生成式替换时，不需要考虑左侧非终结符的上下文
* 3型文法：正规文法，右侧要么是终结符，要么是终结符跟非终结符的组合

以上4种文法是逐级包含的关系，0包含1，1包含2，2包含3，3包含4。

### 2 ANTLR4中的文法

ANTLR4使用的是上下文无关文法，因此，生成式可以在不考虑上下文的情况下进行扩展。

ANTLR4采用自上而下的方法描述和分析，在分析过程中会存在两个问题：

* 左递归：类似`A->Aa|b`形式的，
* 公共左因子：